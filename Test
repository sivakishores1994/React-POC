import React, { useState, useEffect } from 'react';

const DocumentComponent = (props) => {
  const [documentList, setDocumentList] = useState({});

  // Initialize the state with props values
  useEffect(() => {
    if (props.documentList) {
      setDocumentList({ ...props.documentList });
    }
  }, [props.documentList]);

  const updateUploadedDocuments = (newDocument) => {
    const updatedDocumentList = { ...documentList };
    if (updatedDocumentList.document_types && updatedDocumentList.document_types[0]) {
      updatedDocumentList.document_types[0].uploaded_documents = [
        ...(updatedDocumentList.document_types[0].uploaded_documents || []),
        newDocument,
      ];
    }

    // Update the state
    setDocumentList(updatedDocumentList);
  };

  return (
    <div>
      <button
        onClick={() =>
          updateUploadedDocuments({
            document_type_code: props.documentList?.document_types?.[0]?.document_type_code || '',
            document_status: 'UPLOAD',
          })
        }
      >
        Upload Document
      </button>

      <pre>{JSON.stringify(documentList, null, 2)}</pre>
    </div>
  );
};

export default DocumentComponent;
